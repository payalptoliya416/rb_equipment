RewriteEngine On

# ✅ Block Next internal txt files everywhere
RedirectMatch 404 (^|/)(__next.*\.txt)$

# ✅ Allow real files/folders
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# ✅ Inventory deep routes
RewriteRule ^inventory(/.*)?$ /inventory/index.html [L]

# ✅ Checkout deep routes
RewriteRule ^checkout(/.*)?$ /checkout/index.html [L]

# ✅ Confirmation deep routes
RewriteRule ^confirmation(/.*)?$ /confirmation/index.html [L]

RewriteRule ^sale-agreement(/.*)?$ /sale-agreement/index.html [L]

# ✅ SPA fallback
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]